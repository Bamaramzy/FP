<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Registrasi user - SIPAJULI</title>
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
</head>
<body>
    <header>
        <nav class="navbar">
            <a href="index.html" class="logo">SIPAJULI<span>.</span></a>
            <ul class="menu-links">
                <span id="close-menu-btn" class="material-symbols-outline">close</span>
                <li><a href="complaint.html">Laporan Pengaduan</a></li>
                <li><a href="list_complaints.html">Status Pengajuan</a></li>
                <li><a href="login.html">Profil</a></li>
                <li><a href="profile.html">Login Admin</a></li>
                <li><a href="register.html">Registrasi</a></li>
            </ul>
            <span id="menu-btn" class="material-symbols-outline">menu</span>
        </nav>
    </header>

    <section class="hero-section">
        <div class="overlay"></div>
        <div class="content">
            <h1>Registrasi Pengguna</h1>
            <form id="registerForm">
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>
                <label for="password">Password:</label>
                <input type="password" id="password" name="password" required>
                <button type="submit">Register</button>
            </form>
            <button id="backBtn">Back</button>
        </div>
    </section>

    <footer>
        <p>&copy; 2024 SIPAJULI - Pengaduan Parkir Liar</p>
    </footer>

    <script>
        const header = document.querySelector("header");
        const menuBtn = document.querySelector("#menu-btn");
        const closeMenuBtn = document.querySelector("#close-menu-btn");
        const backBtn = document.querySelector("#backBtn");

        menuBtn.addEventListener("click", () => {
            header.classList.toggle("show-mobile-menu");
        });

        closeMenuBtn.addEventListener("click", () => {
            header.classList.toggle("show-mobile-menu");
        });

        backBtn.addEventListener("click", () => {
            window.location.href = "index.html"; // Mengarahkan ke halaman index.html
        });
    </script>

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.1/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.12.1/firebase-analytics.js";
        import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.12.1/firebase-auth.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
          apiKey: "AIzaSyA6d1UgqVmsuaX2kGVGxg2CPWUOv3wQ2X4",
          authDomain: "dbsipajuli.firebaseapp.com",
          projectId: "dbsipajuli",
          storageBucket: "dbsipajuli.appspot.com",
          messagingSenderId: "460540654838",
          appId: "1:460540654838:web:2a67208d8b4eb130dee8d7",
          measurementId: "G-HRJ1WKWP7N"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const auth = getAuth(app);

        // Handle register form submission
        const registerForm = document.getElementById('registerForm');
        registerForm.addEventListener('submit', (e) => {
          e.preventDefault();
          const email = e.target.email.value;
          const password = e.target.password.value;

          createUserWithEmailAndPassword(auth, email, password)
            .then((userCredential) => {
              // Registered
              const user = userCredential.user;
              console.log('User registered:', user);
              window.location.href = "profile.html"; // Redirect to profile page
            })
            .catch((error) => {
              const errorCode = error.code;
              const errorMessage = error.message;
              console.error('Error registering:', errorCode, errorMessage);
              alert('Registration failed: ' + errorMessage);
            });
        });
    </script>
</body>
</html>
